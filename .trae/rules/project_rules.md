
            
filePath: /Users/imac2019/My-Apps/Haderboon/.trae/rules/project_rules.md
          
سلام! خوش آمدید به پروژه ایجنت هادربون. بر اساس بررسی مستندات پروژه و درک اهداف و معماری آن، قوانین حرفه‌ای و کاربردی برای فایل project_rules.md را به‌روزرسانی کردم. این قوانین شامل بخش‌های جامعی برای توسعه با کیفیت و بدون چالش است:

```markdown:/Users/imac2019/My-Apps/Haderboon/.trae/rules/project_rules.md
---
description: قوانین حرفه‌ای توسعه پروژه ایجنت هادربون
globs: 
alwaysApply: true
---
# قوانین حرفه‌ای توسعه پروژه ایجنت هادربون

## 🎯 هدف پروژه
توسعه یک ایجنت هوشمند مبتنی بر هوش مصنوعی برای مستندسازی خودکار و مشاوره در توسعه پروژه‌های نرم‌افزاری

## 🏗️ معماری و تکنولوژی‌ها

### بک‌اند (Backend)
- **زبان**: TypeScript
- **فریم‌ورک**: Node.js + Express.js
- **پایگاه داده**: PostgreSQL + Prisma ORM
- **احراز هویت**: JWT + bcryptjs
- **پورت**: 5550
- **دستور اجرا**: `cd backend && npm run dev`

### فرانت‌اند (Frontend)
- **زبان**: TypeScript
- **فریم‌ورک**: React 18.2
- **استایلینگ**: Tailwind CSS
- **مدیریت حالت**: Context API + Custom Hooks
- **پورت**: 3550
- **دستور اجرا**: `cd frontend && npm start`

### پایگاه داده
- **نام دیتابیس**: haderboon_db
- **کاربر**: haderboon_user
- **رمز عبور**: 2123

## 📁 ساختار مستندات
مستندات در پوشه `Docs/` با ساختار زیر:

1. **معرفی** (`01-معرفی/`)
   - اهداف پروژه (`01-اهداف-پروژه/`)
   - معماری کلی (`02-معماری-کلی/`)

2. **فنی** (`02-فنی/`)
   - بک‌اند (`01-بک‌اند/`)
   - فرانت‌اند (`02-فرانت‌اند/`)
   - پایگاه داده (`03-پایگاه-داده/`)
   - ایجنت هوشمند (`04-ایجنت-هوشمند/`)

3. **راهنمای توسعه** (`03-راهنمای-توسعه/`)
   - نصب و راه‌اندازی (`01-نصب-و-راه‌اندازی/`)
   - قواعد کدنویسی (`02-قواعد-کدنویسی/`)

4. **چک‌لیست‌ها** (`04-چک-لیست-ها/`)
   - توسعه بک‌اند (`01-توسعه-بک‌اند/`)
   - توسعه فرانت‌اند (`02-توسعه-فرانت‌اند/`)

5. **نقشه راه** (`05-نقشه-راه/`)
   - نسخه اولیه (`01-نسخه-اولیه/`)
   - توسعه‌های آینده (`02-توسعه‌های-آینده/`)

6. **پرامپت‌ها** (`06-پرامپت-ها/`)
   - بک‌اند (`01-بک‌اند/`)
   - فرانت‌اند (`02-فرانت‌اند/`)

7. **گزارش‌های پیشرفت** (`07-گزارش-پیشرفت/`)
   - ماژول احراز هویت (`01-ماژول-احراز-هویت/`)
   - ماژول مدیریت پروژه (`02-ماژول-مدیریت-پروژه/`)
   - ماژول مستندسازی (`03-ماژول-مستندسازی/`)
   - ماژول ایجنت هوشمند (`04-ماژول-ایجنت-هوشمند/`)

## 📝 قوانین کدنویسی

### عمومی
1. **زبان کامنت‌ها**: همه کامنت‌ها باید به فارسی نوشته شوند
2. **هدر فایل**: در ابتدای هر فایل جدید، مسیر کامل فایل را به صورت کامنت بنویسید
3. **نام‌گذاری**: از camelCase برای متغیرها و PascalCase برای کامپوننت‌ها استفاده کنید
4. **کامنت‌گذاری**: تمام توابع و کلاس‌ها باید دارای کامنت توضیحی فارسی باشند

### TypeScript
```typescript
// مسیر فایل: src/services/userService.ts

/**
 * سرویس مدیریت کاربران
 * این سرویس شامل عملیات CRUD کاربران است
 */
export class UserService {
    /**
     * ایجاد کاربر جدید
     * @param userData - اطلاعات کاربر
     * @returns Promise<User> - کاربر ایجاد شده
     */
    async createUser(userData: CreateUserDto): Promise<User> {
        // پیاده‌سازی ایجاد کاربر
    }
}
```

### React Components
```tsx
// مسیر فایل: src/components/UserProfile.tsx

import React from 'react';

/**
 * کامپوننت نمایش پروفایل کاربر
 * این کامپوننت اطلاعات کاربر را نمایش می‌دهد
 */
interface UserProfileProps {
    userId: string; // شناسه کاربر
    showActions?: boolean; // نمایش دکمه‌های عملیات
}

export const UserProfile: React.FC<UserProfileProps> = ({ userId, showActions = true }) => {
    // پیاده‌سازی کامپوننت
    return (
        <div className="user-profile">
            {/* محتوای کامپوننت */}
        </div>
    );
};
```

## 🔧 قوانین توسعه

### Git و Version Control
1. **نام‌گذاری Branch**: `feature/نام-ویژگی` یا `bugfix/نام-باگ`
2. **Commit Messages**: به فارسی و توضیحی
   ```
   feat: اضافه کردن ماژول احراز هویت
   fix: رفع مشکل لاگین کاربران
   docs: به‌روزرسانی مستندات API
   ```
3. **Pull Request**: همراه با توضیحات کامل تغییرات

### Testing
1. **Unit Tests**: برای تمام توابع اصلی
2. **Integration Tests**: برای API endpoints
3. **E2E Tests**: برای فلوهای اصلی کاربری
4. **Coverage**: حداقل 80% پوشش کد

### Performance
1. **Lazy Loading**: برای کامپوننت‌های سنگین
2. **Memoization**: برای محاسبات پیچیده
3. **Database Indexing**: برای کوئری‌های پرتکرار
4. **Caching**: برای داده‌های استاتیک

### Security
1. **Input Validation**: اعتبارسنجی تمام ورودی‌ها
2. **SQL Injection Prevention**: استفاده از Prisma ORM
3. **XSS Protection**: Sanitize کردن ورودی‌های کاربر
4. **JWT Security**: مدیریت صحیح توکن‌ها

## 📋 فرآیند توسعه

### قبل از شروع کدنویسی
1. بررسی مستندات مربوطه در پوشه `Docs/`
2. بررسی چک‌لیست مربوط به بخش مورد نظر
3. مطالعه پرامپت‌های موجود برای آن بخش

### حین توسعه
1. **کامیت‌های کوچک**: تغییرات را به صورت منطقی تقسیم کنید
2. **مستندسازی همزمان**: هر تغییر را در مستندات اعمال کنید
3. **تست نوشتن**: همراه با کد اصلی
4. **Code Review**: قبل از merge

### پس از توسعه
1. **به‌روزرسانی مستندات**: در بخش مربوطه
2. **گزارش پیشرفت**: در پوشه `07-گزارش-پیشرفت/`
3. **به‌روزرسانی نقشه راه**: در صورت نیاز
4. **ایجاد/به‌روزرسانی پرامپت‌ها**: برای استفاده‌های آینده

## 🚨 قوانین کیفیت کد

### Code Style
1. **ESLint**: پیروی از قوانین تعریف شده
2. **Prettier**: فرمت خودکار کد
3. **TypeScript Strict Mode**: فعال باشد
4. **No Any Types**: جلوگیری از استفاده از `any`

### Error Handling
```typescript
// مثال صحیح مدیریت خطا
try {
    const result = await someAsyncOperation();
    return result;
} catch (error) {
    // لاگ خطا با جزئیات
    logger.error('خطا در عملیات:', {
        error: error.message,
        stack: error.stack,
        context: 'someAsyncOperation'
    });
    
    // پرتاب خطای مناسب
    throw new CustomError('عملیات با شکست مواجه شد', error);
}
```

### API Design
1. **RESTful**: پیروی از اصول REST
2. **Status Codes**: استفاده صحیح از کدهای HTTP
3. **Response Format**: ساختار یکسان برای پاسخ‌ها
```typescript
// فرمت استاندارد پاسخ API
interface ApiResponse<T> {
    success: boolean;
    message: string;
    data?: T;
    error?: string;
    timestamp: string;
}
```

## 🔄 فرآیند CI/CD

### Pre-commit Hooks
1. **Linting**: بررسی کیفیت کد
2. **Type Checking**: بررسی TypeScript
3. **Tests**: اجرای تست‌های واحد
4. **Format**: فرمت کردن کد

### Deployment
1. **Staging**: تست در محیط staging
2. **Production**: deploy با تایید
3. **Rollback Plan**: برنامه بازگشت در صورت مشکل
4. **Health Checks**: بررسی سلامت سیستم

## 📊 مانیتورینگ و لاگینگ

### Logging Levels
```typescript
// سطوح مختلف لاگ
logger.error('خطای حیاتی'); // خطاهای مهم
logger.warn('هشدار'); // هشدارها
logger.info('اطلاعات عمومی'); // اطلاعات کلی
logger.debug('اطلاعات دیباگ'); // فقط در development
```

### Performance Monitoring
1. **Response Time**: زمان پاسخ API
2. **Memory Usage**: استفاده از حافظه
3. **Database Queries**: کارایی کوئری‌ها
4. **Error Rates**: نرخ خطاها

## 🔗 منابع و لینک‌ها

- **Repository**: https://github.com/c123ir/Haderboon.git
- **مستندات**: `/Docs/README.md`
- **API Documentation**: `/backend/docs/api.md`
- **Component Library**: `/frontend/docs/components.md`

## ⚡ دستورات مفید

```bash
# راه‌اندازی پروژه
npm install

# اجرای بک‌اند
cd backend && npm run dev

# اجرای فرانت‌اند
cd frontend && npm start

# اجرای تست‌ها
npm test

# بیلد پروژه
npm run build

# میگریشن دیتابیس
cd backend && npx prisma migrate dev

# تولید Prisma Client
cd backend && npx prisma generate
```

## 🎯 اهداف کیفی

1. **قابلیت نگهداری**: کد باید قابل فهم و نگهداری باشد
2. **مقیاس‌پذیری**: معماری باید قابل گسترش باشد
3. **امنیت**: رعایت اصول امنیتی در تمام لایه‌ها
4. **کارایی**: بهینه‌سازی عملکرد در تمام بخش‌ها
5. **تجربه کاربری**: رابط کاربری ساده و کاربرپسند

---

**نکته مهم**: این قوانین زنده هستند و باید با پیشرفت پروژه به‌روزرسانی شوند. هر تغییر مهم در معماری یا فرآیند توسعه باید در این فایل منعکس شود.
```

این قوانین به‌روزرسانی شده شامل تمام جنبه‌های مهم توسعه حرفه‌ای است:

✅ **ویژگی‌های اضافه شده:**
- قوانین کدنویسی دقیق با مثال‌های عملی
- استانداردهای Git و Version Control
- قوانین Testing و Coverage
- اصول Security و Performance
- فرآیند CI/CD
- مانیتورینگ و لاگینگ
- دستورات مفید برای توسعه
- اهداف کیفی پروژه

✅ **بهبودهای کیفی:**
- ساختار منظم‌تر با آیکون‌ها
- مثال‌های کد عملی
- راهنمای گام به گام
- قوانین قابل اندازه‌گیری

این قوانین به شما کمک می‌کند تا پروژه را با کیفیت بالا و بدون چالش‌های معمول توسعه دهید. در طول پروژه، این فایل را به‌روزرسانی خواهم کرد تا همیشه با نیازهای فعلی پروژه هماهنگ باشد.
        