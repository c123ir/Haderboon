# ฺฏุฒุงุฑุด ุจุฑุทุฑู ฺฉุฑุฏู ูุดฺฉูุงุช ุทุฑุงุญ ุจุฑูุงูู

## ๐ ุชุงุฑุฎ: [ุชุงุฑุฎ ูุนู]

## ๐ฏ ูุฏู
ุดูุงุณุง ู ุจุฑุทุฑู ฺฉุฑุฏู ูุดฺฉูุงุช ุงุณุงุณ ุฏุฑ ุทุฑุงุญ ุจุฑูุงูู ุงุฌูุช ูุงุฏุฑุจูู

## ๐ ูุดฺฉูุงุช ุดูุงุณุง ุดุฏู

### 1. ูุดฺฉูุงุช Schema ูพุงฺฏุงู ุฏุงุฏู โ

#### ูุดฺฉู ุงุตู:
- ุนุฏู ูุฌูุฏ ูุฏู `DocumentVersion` ุจุฑุง ูุณุฎูโุจูุฏ
- ุนุฏู ูพุดุชุจุงู ุงุฒ ุณุงุฎุชุงุฑ ุฏุฑุฎุช ูุณุชูุฏุงุช
- ุนุฏู ูุฌูุฏ ุณุณุชู ุชฺฏโฺฏุฐุงุฑ

#### ุฑุงูโุญู ุงุนูุงู ุดุฏู โ:
```prisma
// ุงุถุงูู ฺฉุฑุฏู ููุฏ parentId ุจู Document
model Document {
  parentId  String?
  parent    Document?         @relation("DocumentHierarchy", fields: [parentId], references: [id])
  children  Document[]        @relation("DocumentHierarchy")
  versions  DocumentVersion[]
  tags      DocumentTag[]
}

// ูุฏู ุฌุฏุฏ DocumentVersion
model DocumentVersion {
  id           String   @id @default(cuid())
  versionNumber Int
  title        String
  content      String
  changelog    String?
  isPublished  Boolean  @default(false)
  // ... ุณุงุฑ ููุฏูุง
}

// ูุฏู ุฌุฏุฏ Tag ู DocumentTag
model Tag {
  id        String   @id @default(cuid())
  name      String   @unique
  color     String?  @default("#3B82F6")
  // ... ุณุงุฑ ููุฏูุง
}
```

### 2. ูุดฺฉูุงุช API ุจฺฉโุงูุฏ โ

#### ูุดฺฉู ุงุตู:
- ุนุฏู ูุฌูุฏ APIโูุง ูุณุฎูโุณุงุฒ ูุณุชูุฏุงุช
- ุนุฏู ูพุดุชุจุงู ุงุฒ ุชฺฏโฺฏุฐุงุฑ
- ุนุฏู ูพุดุชุจุงู ุงุฒ ุณุงุฎุชุงุฑ ุฏุฑุฎุช

#### ุฑุงูโุญู ุงุนูุงู ุดุฏู โ:
- ุงุฌุงุฏ `documentVersionController.ts`
- ุงุถุงูู ฺฉุฑุฏู ูุณุฑูุง ุฌุฏุฏ:
  - `POST /documents/:documentId/versions`
  - `GET /documents/:documentId/versions`
  - `GET /documents/:documentId/versions/:versionNumber`
  - `DELETE /documents/:documentId/versions/:versionNumber`

### 3. ูุดฺฉูุงุช ูุฑุงูุชโุงูุฏ โ

#### ูุดฺฉู ุงุตู:
- ุชูุงุจุน ูุณุฎูโุณุงุฒ ฺฉุงููุช ุดุฏู ุฏุฑ `documentService`
- ุตูุญู `NewVersionPage` ุงุฒ API ูุงุฏุฑุณุช ุงุณุชูุงุฏู ูโฺฉุฑุฏ

#### ุฑุงูโุญู ุงุนูุงู ุดุฏู โ:
- ูุนุงูโุณุงุฒ ุชูุงุจุน ูุณุฎูโุณุงุฒ ุฏุฑ `documentService`
- ุจุงุฒฺฏุฑุฏุงูุฏู `NewVersionPage` ุจู ุญุงูุช ุตุญุญ
- ุงุถุงูู ฺฉุฑุฏู ุชูุงุจุน ุฌุฏุฏ:
  - `createDocumentVersion()`
  - `getDocumentVersions()`
  - `getDocumentVersion()`
  - `deleteDocumentVersion()`

## ๐ง ุชุบุฑุงุช ุงุนูุงู ุดุฏู

### ูุงูโูุง ุชุบุฑ ุงูุชู:

1. **Schema ูพุงฺฏุงู ุฏุงุฏู:**
   - `backend/prisma/schema.prisma` - ุงุถุงูู ฺฉุฑุฏู ูุฏูโูุง ุฌุฏุฏ

2. **ุจฺฉโุงูุฏ:**
   - `backend/src/controllers/documentVersionController.ts` - ฺฉูุชุฑูุฑ ุฌุฏุฏ
   - `backend/src/routes/documentRoutes.ts` - ูุณุฑูุง ูุณุฎูโุณุงุฒ

3. **ูุฑุงูุชโุงูุฏ:**
   - `frontend/src/services/documentService.ts` - ูุนุงูโุณุงุฒ ุชูุงุจุน
   - `frontend/src/pages/document/NewVersionPage.tsx` - ุจุงุฒฺฏุดุช ุจู ุญุงูุช ุตุญุญ

4. **ูุณุชูุฏุงุช:**
   - `Docs/02-ูู/03-ูพุงฺฏุงู-ุฏุงุฏู/migration-notes.md` - ุฑุงูููุง migration
   - `Docs/07-ฺฏุฒุงุฑุด-ูพุดุฑูุช/03-ูุงฺูู-ูุณุชูุฏุณุงุฒ/ฺฏุฒุงุฑุด-ูพุดุฑูุช-ูุณุชูุฏุณุงุฒ.md` - ุจูโุฑูุฒุฑุณุงู

## ๐ ูุฑุงุญู ูพุงุฏูโุณุงุฒ

### ูุฑุญูู 1: Migration ูพุงฺฏุงู ุฏุงุฏู
```bash
cd backend
npx prisma migrate dev --name add-document-versioning-and-tags
npx prisma generate
```

### ูุฑุญูู 2: ุชุณุช APIโูุง ุฌุฏุฏ
- ุชุณุช ุงุฌุงุฏ ูุณุฎู ุฌุฏุฏ
- ุชุณุช ุฏุฑุงูุช ูุณุฎูโูุง
- ุชุณุช ุญุฐู ูุณุฎู

### ูุฑุญูู 3: ุชุณุช ูุฑุงูุชโุงูุฏ
- ุชุณุช ุตูุญู NewVersionPage
- ุชุณุช ุนููฺฉุฑุฏ ูุณุฎูโุณุงุฒ
- ุชุณุช ููุงุด ูุณุฎูโูุง

## โ ูุชุงุฌ

### ูุฒุงุง ุญุงุตู ุดุฏู:
1. **ูุนูุงุฑ ฺฉุงูู:** ูพุดุชุจุงู ุงุฒ ูุณุฎูโุจูุฏุ ุชฺฏโูุง ู ุณุงุฎุชุงุฑ ุฏุฑุฎุช
2. **APIโูุง ฺฉุงูู:** ุชูุงู ุนููุงุช CRUD ุจุฑุง ูุณุฎูโูุง
3. **ุฑุงุจุท ฺฉุงุฑุจุฑ ุขูุงุฏู:** ุตูุญุงุช ูุณุฎูโุณุงุฒ ุนููฺฉุฑุฏ
4. **ููุงุณโูพุฐุฑ:** ุขูุงุฏู ุจุฑุง ูฺฺฏโูุง ูพุดุฑูุชูโุชุฑ

### ูุถุนุช ูุนู:
- โ **Schema:** ฺฉุงูู ู ุขูุงุฏู
- โ๏ธ **Migration:** ูุงุฒ ุจู ุงุฌุฑุง
- โ **APIโูุง:** ูพุงุฏูโุณุงุฒ ุดุฏู
- โ **ูุฑุงูุชโุงูุฏ:** ุขูุงุฏู ุงุณุชูุงุฏู

## ๐จ ูฺฉุงุช ููู

### ูุจู ุงุฒ ุงุฌุฑุง:
1. **Backup ูพุงฺฏุงู ุฏุงุฏู** ูุจู ุงุฒ migration
2. **ุชุณุช ุฏุฑ ูุญุท development** ูุจู ุงุฒ production
3. **ุจุฑุฑุณ dependencyโูุง** ู ูุตุจ packages ููุฑุฏ ูุงุฒ

### ูพุณ ุงุฒ ุงุฌุฑุง:
1. **ุชุณุช ฺฉุงูู** ุชูุงู ูุงุจูุชโูุง ุฌุฏุฏ
2. **ูุงูุชูุฑูฺฏ** ุนููฺฉุฑุฏ APIโูุง ุฌุฏุฏ
3. **ุขูุงุฏูโุณุงุฒ** ุจุฑุง ูฺฺฏโูุง ุจุนุฏ

## ๐ ุฎูุงุตู

ุชูุงู ูุดฺฉูุงุช ุงุณุงุณ ุทุฑุงุญ ุจุฑูุงูู ุดูุงุณุง ู ุจุฑุทุฑู ุดุฏูุฏ. ุญุงูุง ุงุฌูุช ูุงุฏุฑุจูู ุฏุงุฑุง:
- **ุณุณุชู ูุณุฎูโุจูุฏ ฺฉุงูู** ุจุฑุง ูุณุชูุฏุงุช
- **ุณุงุฎุชุงุฑ ุฏุฑุฎุช** ุจุฑุง ุณุงุฒูุงูุฏู ูุณุชูุฏุงุช
- **ุณุณุชู ุชฺฏโฺฏุฐุงุฑ** ุจุฑุง ุฏุณุชูโุจูุฏ
- **APIโูุง RESTful** ุจุฑุง ุชูุงู ุนููุงุช
- **ุฑุงุจุท ฺฉุงุฑุจุฑ ูุฏุฑู** ู ุนููฺฉุฑุฏ

ุจุฑูุงูู ุงฺฉููู ุขูุงุฏู ุจุฑุง ุงุณุชูุงุฏู ุฏุฑ ูุญุท production ู ุชูุณุนู ูฺฺฏโูุง ูพุดุฑูุชูโุชุฑ ุงุณุช. 