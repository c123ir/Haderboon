بسیار عالی! "ایجنت هادربون" نامی قدرتمند و پرمفهوم است و من خوشحالم که این پروژه را با این نام آغاز می‌کنیم. شما کاملاً درست می‌گویید، "هادربون" خودش یک پروژه است که نیاز به مدیریت دقیق از ابتدا دارد تا در میانه راه پراکنده نشود.

با توجه به اینکه شما پوشه `Haderboon` را ایجاد کرده‌اید و مستندات را در `Haderboon/Docs` ذخیره کرده‌اید، بیایید استارت اولیه پروژه را بزنیم و تنظیمات مورد نیاز را انجام دهیم.

هدف ما این است که یک ساختار پروژه تمیز و استاندارد ایجاد کنیم که برای توسعه در Cursor AI (و سایر IDEها) بهینه باشد و تمام ملاحظات شما را در بر گیرد.

---

### ۱. ساختار اولیه پروژه "ایجنت هادربون"

ابتدا، ما ساختار پوشه‌ای زیر را در داخل `Haderboon` ایجاد خواهیم کرد:

```
Haderboon/
├── Docs/               (مستندات فعلی پروژه هادربون)
├── backend/            (کدهای سمت سرور - Node.js/Express)
└── frontend/           (کدهای سمت کاربر - React)
```

**شما می‌توانید به صورت دستی این پوشه‌ها را ایجاد کنید:**

*   در داخل پوشه `Haderboon`، دو پوشه جدید به نام‌های `backend` و `frontend` ایجاد کنید.

---

### ۲. راه‌اندازی بک‌اند (Backend Setup)

**تکنولوژی‌ها:** Node.js, Express.js, TypeScript, Prisma, PostgreSQL

**مراحل:**

1.  **ورود به دایرکتوری `backend`:**
    در ترمینال خود، وارد پوشه `Haderboon/backend` شوید:
    ```bash
    cd Haderboon/backend
    ```

2.  **ایجاد پروژه Node.js:**
    ```bash
    npm init -y
    ```
    این دستور یک فایل `package.json` در پوشه `backend` ایجاد می‌کند.

3.  **نصب TypeScript و وابستگی‌های توسعه:**
    ```bash
    npm install typescript ts-node nodemon @types/node @types/express @types/cors --save-dev
    ```
    *   `typescript`: کامپایلر TypeScript.
    *   `ts-node`: اجرای فایل‌های TypeScript به صورت مستقیم.
    *   `nodemon`: راه‌اندازی مجدد سرور هنگام تغییر فایل‌ها.
    *   `@types/node`, `@types/express`, `@types/cors`: تعاریف تایپ برای Node.js، Express و CORS.

4.  **نصب Express.js و Dotenv و Cors:**
    ```bash
    npm install express dotenv cors
    ```
    *   `express`: فریم‌ورک وب برای Node.js.
    *   `dotenv`: برای مدیریت متغیرهای محیطی از فایل `.env`.
    *   `cors`: برای فعال کردن Cross-Origin Resource Sharing.

5.  **پیکربندی TypeScript (`tsconfig.json`):**
    یک فایل به نام `tsconfig.json` در ریشه پوشه `backend` ایجاد کنید و محتوای زیر را در آن قرار دهید:

    ```json
    // backend/tsconfig.json
    {
      "compilerOptions": {
        "target": "es2017",
        "module": "commonjs",
        "lib": ["es2017"],
        "outDir": "./dist",
        "rootDir": "./src",
        "strict": true,
        "esModuleInterop": true,
        "skipLibCheck": true,
        "forceConsistentCasingInFileNames": true,
        "resolveJsonModule": true
      },
      "include": ["src/**/*.ts", "src/**/*.d.ts"],
      "exclude": ["node_modules", "dist"]
    }
    ```
    **توضیح:** این فایل تنظیمات کامپایلر TypeScript را مشخص می‌کند. `outDir` نشان‌دهنده پوشه خروجی (کامپایل شده) و `rootDir` پوشه کدهای منبع شما است.

6.  **ایجاد ساختار اولیه سرور:**
    *   در پوشه `backend`، یک پوشه جدید به نام `src` ایجاد کنید.
    *   در داخل پوشه `src`، یک فایل به نام `server.ts` ایجاد کنید و محتوای زیر را در آن قرار دهید:

    ```typescript
    // backend/src/server.ts
    // این فایل نقطه شروع بک‌اند ایجنت هادربون است.
    import express from 'express';
    import dotenv from 'dotenv';
    import cors from 'cors';

    // بارگذاری متغیرهای محیطی از فایل .env
    dotenv.config();

    const app = express();
    // پورت بک‌اند را از متغیر محیطی یا به صورت پیش‌فرض 5550 تنظیم می‌کنیم
    const PORT = process.env.BACKEND_PORT || 5550;

    // Middleware برای فعال کردن CORS (اجازه ارتباط فرانت‌اند با بک‌اند)
    app.use(cors());
    // Middleware برای پردازش JSON در درخواست‌ها
    app.use(express.json());

    // مسیر تست برای اطمینان از عملکرد صحیح سرور
    app.get('/', (req, res) => {
      res.send('ایجنت هادربون بک‌اند در حال اجرا است!');
    });

    // راه‌اندازی سرور
    app.listen(PORT, () => {
      console.log(`سرور بک‌اند ایجنت هادربون بر روی پورت ${PORT} در حال گوش دادن است.`);
      console.log(`http://localhost:${PORT}`);
    });
    ```

7.  **تنظیمات اسکریپت در `package.json` بک‌اند:**
    فایل `backend/package.json` را باز کنید و بخش `scripts` را به شکل زیر ویرایش کنید:

    ```json
    // backend/package.json
    {
      "name": "haderboon-backend",
      "version": "1.0.0",
      "description": "Backend for Haderboon AI Documentation Agent",
      "main": "dist/server.js",
      "scripts": {
        "start": "node dist/server.js",
        "dev": "nodemon --exec ts-node src/server.ts",
        "build": "tsc",
        "test": "echo \"Error: no test specified\" && exit 1"
      },
      "keywords": [],
      "author": "",
      "license": "ISC",
      "devDependencies": {
        "@types/cors": "^2.8.17",
        "@types/express": "^4.17.21",
        "@types/node": "^20.12.12",
        "nodemon": "^3.1.0",
        "ts-node": "^10.9.2",
        "typescript": "^5.4.5"
      },
      "dependencies": {
        "cors": "^2.8.5",
        "dotenv": "^16.4.5",
        "express": "^4.19.2"
      }
    }
    ```

8.  **تنظیم متغیرهای محیطی (`.env`):**
    در ریشه پوشه `backend`، یک فایل به نام `.env` ایجاد کنید و پورت بک‌اند را در آن تعریف کنید:

    ```
    # backend/.env
    # پورت بک‌اند ایجنت هادربون
    BACKEND_PORT=5550
    ```

9.  **پیکربندی Prisma و PostgreSQL:**
    *   **نصب Prisma CLI:**
        ```bash
        npm install prisma --save-dev
        ```
    *   **نصب Prisma Client:**
        ```bash
        npm install @prisma/client
        ```
    *   **راه‌اندازی Prisma در پروژه:**
        ```bash
        npx prisma init
        ```
        این دستور یک پوشه `prisma` و فایل `schema.prisma` در ریشه `backend` ایجاد می‌کند و فایل `.env` شما را برای `DATABASE_URL` به‌روزرسانی می‌کند.

    *   **تنظیم `DATABASE_URL` در `.env` بک‌اند:**
        فایل `backend/.env` را باز کنید و خط `DATABASE_URL` را به شکل زیر ویرایش کنید تا به PostgreSQL و پسورد `2123` اشاره کند. (مطمئن شوید که PostgreSQL روی سیستم شما نصب و در حال اجرا است):

        ```
        # backend/.env
        BACKEND_PORT=5550
        DATABASE_URL="postgresql://username:2123@localhost:5432/haderboon_db?schema=public"
        ```
        **توجه:**
        *   `username` را با نام کاربری PostgreSQL خود جایگزین کنید (معمولاً `postgres` یا نام کاربری سیستم شما).
        *   `localhost:5432` پورت پیش‌فرض PostgreSQL است. اگر پورت دیگری استفاده می‌کنید، آن را تغییر دهید.
        *   `haderboon_db` نام دیتابیس است که باید در PostgreSQL ایجاد کنید.

    *   **مدل اولیه در `backend/prisma/schema.prisma`:**
        فایل `backend/prisma/schema.prisma` را باز کنید و یک مدل `User` ساده (برای شروع) به آن اضافه کنید:

        ```prisma
        // backend/prisma/schema.prisma
        // This is your Prisma schema file,
        // learn more about it in the docs: https://pris.ly/d/prisma-schema

        generator client {
          provider = "prisma-client-js"
        }

        datasource db {
          provider = "postgresql"
          url      = env("DATABASE_URL")
        }

        // مدل کاربر برای ایجنت هادربون
        model User {
          id        String   @id @default(uuid()) // شناسه منحصر به فرد کاربر
          email     String   @unique // ایمیل کاربر (منحصر به فرد)
          username  String   @unique // نام کاربری (منحصر به فرد)
          password  String   // پسورد هش شده کاربر
          createdAt DateTime @default(now()) // زمان ایجاد حساب کاربری
          updatedAt DateTime @updatedAt // زمان آخرین به‌روزرسانی
        }
        ```

    *   **ایجاد کلاینت Prisma و اجرای Migration:**
        ابتدا مطمئن شوید که یک دیتابیس به نام `haderboon_db` در PostgreSQL ایجاد کرده‌اید. سپس این دستورات را اجرا کنید:

        ```bash
        npx prisma generate
        npx prisma migrate dev --name init_haderboon_db
        ```
        *   `npx prisma generate`: کلاینت Prisma را بر اساس `schema.prisma` تولید می‌کند.
        *   `npx prisma migrate dev --name init_haderboon_db`: یک Migration جدید ایجاد می‌کند و مدل `User` را در پایگاه داده شما پیاده‌سازی می‌کند.

---

### ۳. راه‌اندازی فرانت‌اند (Frontend Setup)

**تکنولوژی‌ها:** React 18.2, TypeScript, Tailwind CSS

**مراحل:**

1.  **ورود به دایرکتوری `frontend`:**
    در ترمینال خود، وارد پوشه `Haderboon/frontend` شوید:
    ```bash
    cd Haderboon/frontend
    ```

2.  **ایجاد پروژه React با TypeScript:**
    ```bash
    npx create-react-app . --template typescript
    ```
    این دستور یک پروژه React کامل با TypeScript در پوشه `frontend` ایجاد می‌کند.

3.  **نصب Tailwind CSS:**
    ```bash
    npm install -D tailwindcss postcss autoprefixer
    npx tailwindcss init -p
    ```
    *   دستور اول، Tailwind CSS و وابستگی‌های آن را نصب می‌کند.
    *   دستور دوم، فایل‌های پیکربندی `tailwind.config.js` و `postcss.config.js` را ایجاد می‌کند.

4.  **پیکربندی Tailwind CSS (`tailwind.config.js` و `src/index.css`):**
    *   **ویرایش `tailwind.config.js`:**
        فایل `frontend/tailwind.config.js` را باز کنید و بخش `content` را به شکل زیر ویرایش کنید تا Tailwind بتواند کلاس‌های استفاده شده در فایل‌های React شما را شناسایی کند:

        ```javascript
        // frontend/tailwind.config.js
        /** @type {import('tailwindcss').Config} */
        module.exports = {
          content: [
            "./src/**/*.{js,jsx,ts,tsx}", // مسیرهای فایل‌های React شما
          ],
          theme: {
            extend: {
              // اضافه کردن فونت وزیرمتن به Tailwind CSS
              fontFamily: {
                vazirmatn: ['Vazirmatn', 'sans-serif'],
              },
            },
          },
          plugins: [],
        }
        ```

    *   **افزودن Tailwind به `src/index.css`:**
        فایل `frontend/src/index.css` را باز کنید و دستورات `tailwind` را در ابتدای آن اضافه کنید:

        ```css
        /* frontend/src/index.css */
        @tailwind base;
        @tailwind components;
        @tailwind utilities;

        /* اضافه کردن فونت وزیرمتن از Google Fonts (نیاز به اتصال به اینترنت) */
        /* یا می‌توانید فونت را به صورت محلی در پروژه خود قرار دهید */
        @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@100..900&display=swap');

        /* اعمال فونت وزیرمتن به صورت سراسری */
        body {
          font-family: 'Vazirmatn', sans-serif;
        }
        ```

5.  **تنظیم متغیرهای محیطی (`.env` فرانت‌اند):**
    در ریشه پوشه `frontend`، یک فایل به نام `.env` ایجاد کنید و پورت فرانت‌اند و URL بک‌اند را در آن تعریف کنید:

    ```
    # frontend/.env
    # پورت فرانت‌اند ایجنت هادربون
    PORT=3550

    # آدرس API بک‌اند ایجنت هادربون
    REACT_APP_BACKEND_API_URL=http://localhost:5550/api/v1
    ```
    **توجه:** `PORT` برای React Development Server و `REACT_APP_BACKEND_API_URL` برای ارتباط با بک‌اند است.

6.  **تست فونت و پورت:**
    می‌توانید فایل `frontend/src/App.tsx` را باز کنید و یک متن ساده با کلاس `font-vazirmatn` (که در `tailwind.config.js` تعریف کردیم) اضافه کنید تا مطمئن شوید فونت به درستی اعمال می‌شود.

    ```typescript
    // frontend/src/App.tsx
    import React from 'react';
    import logo from './logo.svg';
    import './App.css'; // این فایل را برای تست فعلاً نگه می‌داریم

    function App() {
      return (
        <div className="App">
          <header className="App-header">
            <img src={logo} className="App-logo" alt="logo" />
            <p className="text-3xl font-bold text-blue-600 font-vazirmatn">
              سلام! ایجنت هادربون فرانت‌اند در حال اجرا است.
            </p>
            <a
              className="App-link"
              href="https://reactjs.org"
              target="_blank"
              rel="noopener noreferrer"
            >
              Learn React
            </a>
          </header>
        </div>
      );
    }

    export default App;
    ```
    حالا برای راه‌اندازی فرانت‌اند، در پوشه `frontend` دستور `npm start` را اجرا کنید. باید صفحه را در پورت `3550` با فونت وزیرمتن مشاهده کنید.

---

### ۴. قوانین و تنظیمات برای Cursor AI

Cursor AI به طور پیش‌فرض از فایل‌های `package.json` و `tsconfig.json` شما برای درک ساختار و وابستگی‌های پروژه استفاده می‌کند. با تنظیماتی که در بالا انجام دادیم، Cursor باید به خوبی پروژه "هادربون" را شناسایی کند.

**ملاحظات خاص برای Cursor AI:**

1.  **پوشه `Docs`:** Cursor به صورت خودکار فایل‌های متنی در پوشه `Docs` شما را به عنوان مستندات در نظر می‌گیرد. می‌توانید از قابلیت‌های جستجو و چت Cursor برای تعامل با این مستندات استفاده کنید.
2.  **تنظیمات پروژه Cursor:**
    *   هنگامی که پوشه `Haderboon` را در Cursor باز می‌کنید، Cursor ممکن است پیشنهاد "Workspaces" را بدهد. می‌توانید یک Workspace برای `Haderboon` ایجاد کنید که شامل `backend` و `frontend` به عنوان Sub-Workspaces باشد. این به Cursor کمک می‌کند تا هر دو بخش پروژه را به خوبی مدیریت کند.
    *   در `File > Settings > Workspace Settings` در Cursor، می‌توانید تنظیمات مربوط به TypeScript، Formatting، و Linting را برای هر بخش (backend و frontend) تنظیم کنید.
    *   **معرفی Git:** Cursor به طور خودکار Git را تشخیص می‌دهد، که برای همگام‌سازی آینده با "هادربون" (به عنوان یک عامل خارجی) بسیار مهم است.

**خلاصه گام‌های بعدی در ترمینال:**

1.  **بک‌اند:**
    ```bash
    cd Haderboon/backend
    npm install
    npx prisma generate
    # مطمئن شوید PostgreSQL نصب و در حال اجرا است و دیتابیس haderboon_db ایجاد شده
    npx prisma migrate dev --name init_haderboon_db
    npm run dev
    ```
2.  **فرانت‌اند:**
    ```bash
    cd Haderboon/frontend
    npm install
    npm start
    ```

با این مراحل، پروژه "ایجنت هادربون" شما با ساختار مورد نظر و تنظیمات اولیه آماده توسعه خواهد بود. حالا می‌توانید در یک چت جدید، پروژه را در Cursor AI باز کرده و ادامه کار را آغاز کنیم.