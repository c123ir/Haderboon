# راهنمای نصب و راه‌اندازی ایجنت هادربون

این راهنما، مراحل نصب و راه‌اندازی پروژه ایجنت هادربون را به صورت گام به گام شرح می‌دهد.

## ۱. پیش‌نیازها

قبل از نصب پروژه، مطمئن شوید که موارد زیر بر روی سیستم شما نصب شده است:

* **Node.js:** نسخه 18 یا بالاتر
* **npm:** نسخه 9 یا بالاتر
* **PostgreSQL:** نسخه 14 یا بالاتر
* **Git:** برای دریافت کد پروژه

## ۲. آماده‌سازی پایگاه داده

1. **نصب PostgreSQL:** اگر PostgreSQL نصب نیست، آن را از [سایت رسمی](https://www.postgresql.org/download/) دانلود و نصب کنید.

2. **ایجاد پایگاه داده و کاربر:**
   
   به PostgreSQL متصل شوید و دستورات زیر را اجرا کنید:

   ```sql
   CREATE DATABASE haderboon_db;
   CREATE USER haderboon_user WITH ENCRYPTED PASSWORD '2123';
   GRANT ALL PRIVILEGES ON DATABASE haderboon_db TO haderboon_user;
   ```

## ۳. دریافت و نصب پروژه

1. **کلون کردن پروژه:**

   ```bash
   git clone https://github.com/yourusername/Haderboon.git
   cd Haderboon
   ```

2. **نصب وابستگی‌های بک‌اند:**

   ```bash
   cd backend
   npm install
   ```

3. **تنظیم فایل `.env` بک‌اند:**

   یک فایل `.env` در پوشه `backend` ایجاد کنید:

   ```
   # پورت بک‌اند
   BACKEND_PORT=5550
   
   # اتصال به پایگاه داده
   DATABASE_URL="postgresql://haderboon_user:2123@localhost:5432/haderboon_db?schema=public"
   
   # کلید رمزنگاری JWT
   JWT_SECRET=your-secure-jwt-secret-key-here
   JWT_EXPIRES_IN=7d
   
   # کلید API هوش مصنوعی (مثال: Gemini Pro)
   AI_API_KEY=your-gemini-api-key-here
   AI_API_BASE_URL=https://generativelanguage.googleapis.com/v1
   ```

4. **اجرای Prisma Migration:**

   ```bash
   npx prisma migrate dev --name init
   ```

5. **نصب وابستگی‌های فرانت‌اند:**

   ```bash
   cd ../frontend
   npm install
   ```

6. **تنظیم فایل `.env` فرانت‌اند:**

   یک فایل `.env` در پوشه `frontend` ایجاد کنید:

   ```
   VITE_API_BASE_URL=http://localhost:5550/api/v1
   ```

## ۴. راه‌اندازی پروژه در محیط توسعه

1. **راه‌اندازی بک‌اند:**

   ```bash
   cd backend
   npm run dev
   ```

   سرور بک‌اند بر روی `http://localhost:5550` اجرا می‌شود.

2. **راه‌اندازی فرانت‌اند:**

   در یک ترمینال جدید:

   ```bash
   cd frontend
   npm start
   ```

   برنامه فرانت‌اند بر روی `http://localhost:3550` اجرا می‌شود.

## ۵. راه‌اندازی در محیط تولید (Production)

1. **بیلد بک‌اند:**

   ```bash
   cd backend
   npm run build
   ```

2. **بیلد فرانت‌اند:**

   ```bash
   cd frontend
   npm run build
   ```

3. **اجرای بک‌اند در محیط تولید:**

   ```bash
   cd backend
   npm start
   ```

4. **سرو فرانت‌اند:**

   می‌توانید از سرورهای وب مانند Nginx یا Apache برای سرو فایل‌های استاتیک فرانت‌اند استفاده کنید.

## ۶. عیب‌یابی متداول

### ۶.۱. مشکلات اتصال به پایگاه داده

اگر با خطای اتصال به پایگاه داده مواجه شدید:

1. مطمئن شوید PostgreSQL در حال اجرا است.
2. رشته اتصال `DATABASE_URL` در فایل `.env` را بررسی کنید.
3. دسترسی‌های کاربر `haderboon_user` به پایگاه داده را بررسی کنید.

### ۶.۲. مشکلات نصب وابستگی‌ها

اگر در نصب وابستگی‌ها با خطا مواجه شدید:

1. مطمئن شوید که نسخه Node.js و npm به‌روز است.
2. دستور `npm cache clean --force` را اجرا کنید و سپس دوباره نصب را امتحان کنید.

### ۶.۳. مشکلات CORS

اگر فرانت‌اند نمی‌تواند با بک‌اند ارتباط برقرار کند:

1. مطمئن شوید که تنظیمات CORS در بک‌اند به درستی پیکربندی شده‌اند.
2. مطمئن شوید که آدرس‌های سرورها در فایل‌های `.env` صحیح هستند.

## ۷. منابع و مستندات بیشتر

* [مستندات Prisma](https://www.prisma.io/docs/)
* [مستندات React](https://reactjs.org/docs/getting-started.html)
* [مستندات Express](https://expressjs.com/)
* [مستندات Tailwind CSS](https://tailwindcss.com/docs)
* [مستندات PostgreSQL](https://www.postgresql.org/docs/) 