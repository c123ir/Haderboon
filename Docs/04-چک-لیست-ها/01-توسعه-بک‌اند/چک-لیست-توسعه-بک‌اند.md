# چک لیست توسعه بک‌اند

این چک لیست برای توسعه‌دهندگانی است که بر روی بخش بک‌اند پروژه ایجنت هادربون کار می‌کنند. با پیروی از این چک لیست، می‌توانید اطمینان حاصل کنید که تمام جنبه‌های مهم توسعه بک‌اند رعایت شده است.

## ۱. تنظیمات اولیه و ابزارها

- [ ] **نصب و پیکربندی Node.js/Express**
  - [ ] نصب Express.js (`npm install express @types/express`)
  - [ ] پیکربندی سرور Express.js در `src/server.ts`
  - [ ] تنظیم CORS برای ارتباط با فرانت‌اند
  - [ ] تنظیم middleware برای پردازش JSON

- [ ] **پیکربندی TypeScript**
  - [ ] تنظیم `tsconfig.json` با تنظیمات مناسب
  - [ ] تنظیم اسکریپت‌های `package.json` برای اجرا و بیلد

- [ ] **پیکربندی Prisma ORM**
  - [ ] نصب Prisma CLI و Client
  - [ ] ایجاد فایل `schema.prisma` با مدل‌های مورد نیاز
  - [ ] تنظیم ارتباط با PostgreSQL
  - [ ] اجرای migration اولیه

- [ ] **پیکربندی متغیرهای محیطی**
  - [ ] ایجاد فایل `.env` برای تنظیمات محیطی
  - [ ] ایجاد فایل `.env.example` برای راهنمایی توسعه‌دهندگان

## ۲. ماژول احراز هویت (Authentication)

- [ ] **مدل `User` در Prisma**
  - [ ] فیلدهای اصلی: `id`, `username`, `email`, `password`, `createdAt`, `updatedAt`
  - [ ] تعریف ارتباطات با سایر مدل‌ها

- [ ] **کنترلر `authController.ts`**
  - [ ] تابع `registerUser` (ثبت‌نام کاربر جدید)
  - [ ] تابع `loginUser` (ورود کاربر)
  - [ ] تابع `getCurrentUser` (دریافت اطلاعات کاربر فعلی)
  - [ ] هش کردن پسورد با `bcryptjs`
  - [ ] تولید و مدیریت JWT

- [ ] **مسیرهای احراز هویت**
  - [ ] `POST /api/v1/auth/register`
  - [ ] `POST /api/v1/auth/login`
  - [ ] `GET /api/v1/auth/me`

- [ ] **میدل‌ویر احراز هویت**
  - [ ] میدل‌ویر `protect` برای محافظت از مسیرها
  - [ ] اعتبارسنجی و استخراج توکن JWT
  - [ ] افزودن اطلاعات کاربر به درخواست

## ۳. ماژول مدیریت پروژه (Project Management)

- [ ] **مدل `Project` در Prisma**
  - [ ] فیلدهای اصلی: `id`, `name`, `description`, `ownerId`, `createdAt`, `updatedAt`
  - [ ] تعریف ارتباط با مدل `User`

- [ ] **کنترلر `projectController.ts`**
  - [ ] تابع `createProject` (ایجاد پروژه جدید)
  - [ ] تابع `getProjects` (دریافت پروژه‌های کاربر)
  - [ ] تابع `getProjectById` (دریافت جزئیات یک پروژه)
  - [ ] تابع `updateProject` (به‌روزرسانی پروژه)
  - [ ] تابع `deleteProject` (حذف پروژه)

- [ ] **مسیرهای مدیریت پروژه**
  - [ ] `POST /api/v1/projects`
  - [ ] `GET /api/v1/projects`
  - [ ] `GET /api/v1/projects/:id`
  - [ ] `PUT /api/v1/projects/:id`
  - [ ] `DELETE /api/v1/projects/:id`

## ۴. ماژول مستندات (Document Management)

- [ ] **مدل `Document` در Prisma**
  - [ ] فیلدهای اصلی: `id`, `title`, `content`, `type`, `projectId`, `version`, `createdAt`, `updatedAt`
  - [ ] تعریف ارتباط با مدل `Project`

- [ ] **کنترلر `documentController.ts`**
  - [ ] تابع `createDocument` (ایجاد مستند جدید)
  - [ ] تابع `getDocumentsByProject` (دریافت مستندات یک پروژه)
  - [ ] تابع `getDocumentById` (دریافت جزئیات یک مستند)
  - [ ] تابع `updateDocument` (به‌روزرسانی مستند)
  - [ ] تابع `deleteDocument` (حذف مستند)

- [ ] **مسیرهای مدیریت مستندات**
  - [ ] `POST /api/v1/projects/:projectId/documents`
  - [ ] `GET /api/v1/projects/:projectId/documents`
  - [ ] `GET /api/v1/documents/:id`
  - [ ] `PUT /api/v1/documents/:id`
  - [ ] `DELETE /api/v1/documents/:id`

## ۵. ماژول چت هوشمند (AI Chat)

- [ ] **مدل‌های `Conversation` و `Message` در Prisma**
  - [ ] تعریف فیلدها و ارتباطات در مدل `Conversation`
  - [ ] تعریف فیلدها و ارتباطات در مدل `Message`

- [ ] **سرویس `aiService.ts`**
  - [ ] پیکربندی ارتباط با API هوش مصنوعی
  - [ ] تابع `generateTextResponse` (دریافت پاسخ متنی)
  - [ ] تابع `analyzeImage` (تحلیل تصویر)

- [ ] **کنترلر `chatController.ts`**
  - [ ] تابع `createConversation` (ایجاد مکالمه جدید)
  - [ ] تابع `getConversations` (دریافت مکالمات کاربر)
  - [ ] تابع `sendMessage` (ارسال پیام و دریافت پاسخ AI)
  - [ ] تابع `getMessages` (دریافت پیام‌های یک مکالمه)

- [ ] **مسیرهای چت هوشمند**
  - [ ] `POST /api/v1/conversations`
  - [ ] `GET /api/v1/conversations`
  - [ ] `POST /api/v1/conversations/:id/messages`
  - [ ] `GET /api/v1/conversations/:id/messages`

## ۶. ماژول آپلود فایل (File Upload)

- [ ] **مدل `File` در Prisma**
  - [ ] فیلدهای اصلی: `id`, `name`, `path`, `mimeType`, `size`, `projectId`, `uploadedBy`, `createdAt`
  - [ ] تعریف ارتباط با مدل‌های `Project` و `User`

- [ ] **پیکربندی Multer**
  - [ ] نصب و تنظیم Multer برای آپلود فایل
  - [ ] تنظیم محدودیت‌های اندازه و نوع فایل

- [ ] **کنترلر `fileController.ts`**
  - [ ] تابع `uploadFile` (آپلود فایل جدید)
  - [ ] تابع `getFilesByProject` (دریافت فایل‌های یک پروژه)
  - [ ] تابع `deleteFile` (حذف فایل)

- [ ] **مسیرهای آپلود فایل**
  - [ ] `POST /api/v1/files/upload`
  - [ ] `GET /api/v1/projects/:projectId/files`
  - [ ] `DELETE /api/v1/files/:id`

## ۷. مدیریت خطا و لاگینگ

- [ ] **میدل‌ویر مدیریت خطا**
  - [ ] ایجاد میدل‌ویر `errorMiddleware.ts`
  - [ ] پیکربندی پاسخ‌های خطای استاندارد

- [ ] **پیکربندی سیستم لاگینگ**
  - [ ] نصب و پیکربندی Winston برای لاگینگ
  - [ ] تنظیم سطوح مختلف لاگ (error, warn, info, debug)
  - [ ] تنظیم خروجی لاگ‌ها (کنسول، فایل)

## ۸. تست

- [ ] **تست‌های واحد**
  - [ ] نصب و پیکربندی Jest
  - [ ] تست توابع کنترلرها
  - [ ] تست میدل‌ویرها

- [ ] **تست‌های یکپارچگی**
  - [ ] تست کامل مسیرهای API
  - [ ] تست ارتباط با پایگاه داده

## ۹. مستندسازی API

- [ ] **تولید مستندات API**
  - [ ] نصب و پیکربندی Swagger/OpenAPI
  - [ ] مستندسازی تمام مسیرهای API
  - [ ] مستندسازی مدل‌های داده

## ۱۰. امنیت

- [ ] **اعتبارسنجی ورودی‌ها**
  - [ ] نصب و پیکربندی express-validator یا Zod
  - [ ] اعتبارسنجی تمام ورودی‌های کاربر

- [ ] **محافظت در برابر حملات رایج**
  - [ ] پیکربندی Helmet برای هدرهای امنیتی
  - [ ] پیکربندی Rate Limiting برای جلوگیری از حملات Brute Force
  - [ ] مقابله با حملات XSS و CSRF

## ۱۱. بهینه‌سازی و عملکرد

- [ ] **بهینه‌سازی کوئری‌های پایگاه داده**
  - [ ] استفاده از select برای انتخاب فیلدهای مورد نیاز
  - [ ] استفاده از include برای بارگذاری ارتباطات

- [ ] **کش‌کردن داده‌ها**
  - [ ] پیکربندی سیستم کش (Redis/Memcached)
  - [ ] کش‌کردن پاسخ‌های پرتکرار

## ۱۲. آماده‌سازی برای تولید (Production)

- [ ] **تنظیمات محیط تولید**
  - [ ] ایجاد فایل `.env.production`
  - [ ] تنظیم متغیرهای محیطی مخصوص تولید

- [ ] **اسکریپت‌های بیلد و دیپلوی**
  - [ ] تنظیم اسکریپت‌های `package.json` برای محیط تولید
  - [ ] تنظیم فایل‌های پیکربندی دیپلوی (Docker/PM2) 