# پرامپت توسعه سیستم احراز هویت در فرانت‌اند

این پرامپت برای توسعه سیستم احراز هویت در فرانت‌اند پروژه ایجنت هادربون طراحی شده است.

## پرامپت کامل

```
پروژه: ایجنت هادربون (فرانت‌اند React با TypeScript و Tailwind CSS)

هدف: پیاده‌سازی سیستم احراز هویت در فرانت‌اند شامل صفحات ورود و ثبت‌نام، کانتکست احراز هویت، و مدیریت توکن JWT.

زمینه: این یک پروژه مستندساز هوشمند مبتنی بر هوش مصنوعی است که به برنامه‌نویسان در مستندسازی پروژه‌ها کمک می‌کند. بک‌اند آن با Node.js/Express و Prisma ORM پیاده‌سازی شده است.

## ۱. فایل‌های مورد نیاز:

1. `src/services/api.ts`: تنظیمات پایه Axios
2. `src/services/authService.ts`: سرویس احراز هویت
3. `src/context/AuthContext.tsx`: کانتکست احراز هویت
4. `src/hooks/useAuth.ts`: هوک سفارشی برای استفاده از کانتکست
5. `src/components/auth/LoginForm.tsx`: کامپوننت فرم ورود
6. `src/components/auth/RegisterForm.tsx`: کامپوننت فرم ثبت‌نام
7. `src/routes/ProtectedRoute.tsx`: کامپوننت مسیر محافظت شده

## ۲. وابستگی‌های مورد نیاز:
- axios: برای ارتباط با API
- react-router-dom: برای مدیریت مسیرها
- react-hook-form: برای مدیریت فرم‌ها
- zod: برای اعتبارسنجی فرم‌ها
- @hookform/resolvers: برای استفاده از Zod با React Hook Form

## ۳. جزئیات پیاده‌سازی:

### ۳.۱. `src/services/api.ts`:
این فایل باید تنظیمات پایه Axios را پیاده‌سازی کند:
- ایجاد نمونه Axios با آدرس پایه API
- تنظیم interceptor برای افزودن توکن JWT به هدر درخواست‌ها
- تنظیم interceptor برای مدیریت خطای ۴۰۱ (خروج خودکار)

### ۳.۲. `src/services/authService.ts`:
این فایل باید توابع زیر را پیاده‌سازی کند:
- `register`: برای ثبت‌نام کاربر جدید
- `login`: برای ورود کاربر
- `logout`: برای خروج کاربر
- `getCurrentUser`: برای دریافت اطلاعات کاربر فعلی
- `getToken`: برای دریافت توکن JWT از localStorage
- `setToken`: برای ذخیره توکن JWT در localStorage
- `removeToken`: برای حذف توکن JWT از localStorage

### ۳.۳. `src/context/AuthContext.tsx`:
این فایل باید یک کانتکست React را پیاده‌سازی کند که:
- وضعیت احراز هویت کاربر را مدیریت کند (loading, isAuthenticated, user)
- توابع مورد نیاز برای احراز هویت را ارائه دهد (login, register, logout)
- در هنگام بارگذاری اولیه، وضعیت احراز هویت را بررسی کند

### ۳.۴. `src/hooks/useAuth.ts`:
این فایل باید یک هوک سفارشی را پیاده‌سازی کند که:
- به کانتکست احراز هویت دسترسی داشته باشد
- داده‌ها و توابع کانتکست را به صورت آسان در دسترس کامپوننت‌ها قرار دهد

### ۳.۵. `src/components/auth/LoginForm.tsx`:
این فایل باید یک کامپوننت فرم ورود را پیاده‌سازی کند که:
- از React Hook Form برای مدیریت فرم استفاده کند
- از Zod برای اعتبارسنجی داده‌ها استفاده کند
- از کانتکست احراز هویت برای ورود کاربر استفاده کند
- وضعیت بارگذاری و خطا را مدیریت کند

### ۳.۶. `src/components/auth/RegisterForm.tsx`:
این فایل باید یک کامپوننت فرم ثبت‌نام را پیاده‌سازی کند که:
- از React Hook Form برای مدیریت فرم استفاده کند
- از Zod برای اعتبارسنجی داده‌ها استفاده کند
- از کانتکست احراز هویت برای ثبت‌نام کاربر استفاده کند
- وضعیت بارگذاری و خطا را مدیریت کند

### ۳.۷. `src/routes/ProtectedRoute.tsx`:
این فایل باید یک کامپوننت مسیر محافظت شده را پیاده‌سازی کند که:
- وضعیت احراز هویت کاربر را بررسی کند
- در صورت عدم احراز هویت، کاربر را به صفحه ورود هدایت کند
- در حین بررسی وضعیت احراز هویت، یک نشانگر بارگذاری نمایش دهد

## ۴. تایپ‌های مورد نیاز:

```typescript
// تایپ کاربر
interface User {
  id: string;
  username: string;
  email: string;
  firstName?: string;
  lastName?: string;
}

// تایپ داده‌های ورود
interface LoginData {
  email: string;
  password: string;
}

// تایپ داده‌های ثبت‌نام
interface RegisterData {
  username: string;
  email: string;
  password: string;
  confirmPassword: string;
}

// تایپ کانتکست احراز هویت
interface AuthContextType {
  user: User | null;
  isAuthenticated: boolean;
  isLoading: boolean;
  login: (data: LoginData) => Promise<void>;
  register: (data: RegisterData) => Promise<void>;
  logout: () => void;
}
```

لطفاً کدها را با رعایت استانداردهای TypeScript و با پشتیبانی از RTL برای متن فارسی پیاده‌سازی کنید.
```

## نحوه استفاده از پرامپت

1. محتوای بخش "پرامپت کامل" را کپی کنید.
2. آن را در ابزار کدنویسی هوش مصنوعی مانند Cursor AI قرار دهید.
3. از هوش مصنوعی بخواهید که کدهای مورد نیاز را تولید کند.
4. وابستگی‌های مورد نیاز را نصب کنید:
   ```bash
   npm install axios react-router-dom react-hook-form zod @hookform/resolvers
   ```